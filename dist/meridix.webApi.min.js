/*! Meridix-WebAPI-JS - v0.0.1 - 2016-10-18
* https://github.com/meridixsystems/Meridix-WebApi-JS
* Copyright (c) 2016 ; Licensed MIT */
var meridix=meridix||{};meridix.webApi=meridix.webApi||{},meridix.webApi.createSignedUrl=function(a,b,c,d,e){function f(a){e.consoleLoggingEnabled&&console&&console.log&&console.log(a)}function g(a){for(var b="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",c="",d=a;d>0;--d)c+=b[Math.round(Math.random()*(b.length-1))];return c}function h(a){if(!CryptoJS||!CryptoJS.MD5)throw"CryptoJS (.MD5) is not defined. Make sure that it is referenced and loaded prior to calling this method.";var b=CryptoJS.MD5(a);return b.toString(CryptoJS.enc.Hex)}function i(a,b){for(var c="0",d=0;b>d;d++)c+="0";return(c+a).slice(-1*b)}function j(a){return""+a.getFullYear()+i(a.getMonth()+1,2)+i(a.getDate(),2)+i(a.getHours(),2)+i(a.getMinutes(),2)+i(a.getSeconds(),2)}e=e||{consoleLoggingEnabled:!1,parameters:void 0},f("Token:\n"+c),f("Secret:\n"+d);var k=b;f("Request URL:\n"+k);var l=g(20);f("Nonce:\n"+l);var m=new Date,n=new Date(m.getTime()+6e4*m.getTimezoneOffset()),o=j(n);f("Timestamp:\n"+o);var p=["auth_nonce="+l,"auth_timestamp="+o,"auth_token="+c];e.parameters&&(p=p.concat(e.parameters)),p.sort();var q=p.join("&");f("ParametersConcated:\n"+q);var r=encodeURIComponent(q);f("ParametersConcatedEncoded:\n"+r);var s=encodeURIComponent(k);f("RequestEncoded:\n"+s);var t=a.toUpperCase()+"&"+s+"&"+r+"&"+d;f("VerbRequestQuery:\n"+t);var u=h(t);f("Signature:\n"+u);var v=k+"?"+q+"&auth_signature="+u;return f("SignedRequest:\n"+v),v};